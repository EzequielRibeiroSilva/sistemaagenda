# ============================================
# Variáveis de Ambiente - PRODUÇÃO
# Painel de Agendamento Multi-Tenant
# ============================================
#
# INSTRUÇÕES:
#   1. Copie este arquivo para .env.prod
#   2. Preencha TODOS os valores
#   3. Use o script generate-production-secrets.js para gerar secrets
#   4. NUNCA commite o arquivo .env.prod no repositório
#
# ============================================

# --------------------------------------------
# BANCO DE DADOS POSTGRESQL
# --------------------------------------------
PG_HOST=db
PG_PORT=5432
PG_DATABASE=painel_agendamento_prod
PG_USER=painel_prod_user
# ⚠️ GERAR SENHA FORTE (mínimo 32 caracteres)
PG_PASSWORD=GERAR_SENHA_FORTE_AQUI

# Pool de conexões (ajustar conforme servidor)
PG_POOL_MAX=25

# SSL (true em produção com banco externo)
PG_SSL_REJECT_UNAUTHORIZED=false

# --------------------------------------------
# REDIS
# --------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
# ⚠️ GERAR SENHA FORTE
REDIS_PASSWORD=GERAR_SENHA_FORTE_AQUI

# --------------------------------------------
# JWT - AUTENTICAÇÃO
# --------------------------------------------
# ⚠️ GERAR SECRETS ÚNICOS E FORTES (mínimo 64 caracteres)
# Use: node backend/scripts/generate-production-secrets.js
JWT_SECRET=GERAR_SECRET_FORTE_AQUI_MINIMO_64_CARACTERES
JWT_REFRESH_SECRET=GERAR_OUTRO_SECRET_FORTE_AQUI_MINIMO_64_CARACTERES

# Tempo de expiração
JWT_EXPIRES_IN=2h
JWT_REFRESH_EXPIRES_IN=7d

# --------------------------------------------
# WHATSAPP / EVOLUTION API
# --------------------------------------------
WHATSAPP_ENABLED=true
EVOLUTION_API_URL=https://sua-evolution-api.com/
EVOLUTION_API_KEY=sua_api_key_aqui
EVOLUTION_INSTANCE_NAME=PAINEL-AGENDAMENTOS

# Lembretes
REMINDER_24H_ENABLED=true
REMINDER_1H_ENABLED=true

# --------------------------------------------
# CORS - DOMÍNIOS PERMITIDOS
# --------------------------------------------
# Separar múltiplos domínios por vírgula
CORS_PRODUCTION_ORIGINS=https://seudominio.com.br,https://app.seudominio.com.br

# --------------------------------------------
# APLICAÇÃO
# --------------------------------------------
NODE_ENV=production
PORT=3001
TZ=America/Sao_Paulo

# URL pública do frontend (usada para gerar links em mensagens WhatsApp)
# Ex: https://app.tally.com.br
FRONTEND_URL=https://app.seudominio.com.br

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# --------------------------------------------
# MONITORAMENTO (OPCIONAL)
# --------------------------------------------
# Sentry para tracking de erros
# SENTRY_DSN=https://xxxx@sentry.io/xxxx

# New Relic
# NEW_RELIC_LICENSE_KEY=xxxx
# NEW_RELIC_APP_NAME=painel-agendamento-prod

# --------------------------------------------
# BACKUP (OPCIONAL)
# --------------------------------------------
# S3 para backup de uploads
# AWS_ACCESS_KEY_ID=xxxx
# AWS_SECRET_ACCESS_KEY=xxxx
# AWS_S3_BUCKET=painel-agendamento-backups
# AWS_REGION=sa-east-1

# ============================================
# CHECKLIST ANTES DO DEPLOY:
# ============================================
# [ ] PG_PASSWORD gerado com: openssl rand -base64 32
# [ ] REDIS_PASSWORD gerado com: openssl rand -base64 32
# [ ] JWT_SECRET gerado com: openssl rand -base64 64
# [ ] JWT_REFRESH_SECRET gerado com: openssl rand -base64 64
# [ ] CORS_PRODUCTION_ORIGINS configurado com domínios reais
# [ ] EVOLUTION_API configurado e testado
# [ ] Backup configurado e testado
# [ ] SSL/TLS configurado no proxy reverso
# ============================================

